---
description: Обзор жизненного цикла предложения по улучшению dYdX (ППУ).
---

# Жизненный цикл предложения

## **Этапы предложения**

Процесс управления dYdX обеспечивается форумами по управлению на веб-сайте [**forums.dydx.community**](https://forums.dydx.community/) и утверждается путем внесения предложений по улучшению dYdX (далее — «ППУ»).

Ниже мы приводим предварительный проект, объясняющий, как будет протекать процесс управления dYdX — от зарождения и определения концепции до ее фактической реализации. Эти процессы могут быть изменены согласно комментариям сообщества DYDX.

Предлагаемые начальные этапы принятия предложения отражены на следующей блок-схеме:

![Этапы ППУ](../.gitbook/assets/1-proposal-stage-flow-chart.png)

## 0. Обсуждение на форуме

На форумах управления dYdX по адресу [**forums.dydx.community**](https://forums.dydx.community/) зарегистрироваться и создать ветку на любую тему могут все пользователи. Члены сообщества должны зарегистрироваться, используя адрес электронной почты или кошелек Ethereum.

## 1. Создание ЗК (офчейн)

Офчейн-создание **запроса комментариев dYdX** (далее — «ЗК») — это первый шаг в процессе улучшения управления. Участвовать в форуме управления, создавать ЗК вне блокчейна и обсуждать улучшения может любой пользователь.

Чтобы создать ЗК, используйте [этот шаблон](https://github.com/dydxfoundation/dip/blob/master/DIP-X.md), доступный в нашем профиле GitHub. В ЗК должна содержаться вся информация о потенциальном окончательном ППУ.

Как минимум, ЗК должен включать следующее:

* Короткие и точные названия заголовков ЗК
* Короткое и точное описание предложения
* Обоснование для ЗК, например, причина его подачи
* Заголовок публикации на форуме должен включать краткое название ЗК. Например, «ЗК: запрос нового рынка»
* Опрос сообщества, который члены сообщества могут использовать для офчейн-голосования по улучшениям

## 2. Обсуждение ЗК и комментарии

После публикации на форуме управления все вопросы и комментарии должны быть рассмотрены и приняты во внимание для дальнейшего улучшения ЗК.

## 3. Снимок опроса по ЗК

Опросы Snapshot служат двум целям: выявление отношения к будущим ППУ в цепочке и связывание голосов для переменных, контролируемых вне цепочки.

Как только ЗК вне цепочки достигнет примерного консенсуса, член сообщества, владеющий более чем `10 000` DYDX, может создать **офчейн-голосование** по ЗК с помощью **Snapshot**. Мы призываем сообщество dYdX создавать опросы Snapshot по понедельникам, чтобы другие могли с большей вероятностью увидеть их в течение обычной рабочей недели.

Snapshot — это простой интерфейс для голосования, который позволяет пользователям выразить мнение вне блокчейна. Вес голосов на Snapshot зависит от права голоса адреса, используемого для голосования.

Для опросов Snapshot, связанных с определением отношения, автор предложения должен предоставить следующее:

* сведения о ЗК;
* система голосования;
* период голосования — дата начала и окончания голосования с учетом 4-дневного периода голосования;
* задержка голосования — номер блока Snapshot, находящийся на 6570 блоков (примерно сутки) в будущем. Номер блока Snapshot фиксирует состояние участников сообщества, которые могут голосовать. Голосовать могут пользователи, владевшие токенами до фиксации номером блока Snapshot. До снимка права голоса каждого адреса задержка голосования дает пользователям, владеющим DYDX/stkDYDY, время на покупку токенов, делегирование права голоса и перевод токенов между кошельками (перевод токенов между кошельками возможен только для пользователей, владеющих DYDX).

Для решений, которые не требуют вызова смарт-контракта в цепочке, например, изменения формул распределения наград за торговлю или поставщикам ликвидности, голосование Snapshot имеет обязательную и окончательную силу. Автор предложения должен указать вышеперечисленные требования, а также предоставить следующее:

* бинарные варианты голосования — для ясности, адрес голосует либо за предложение, либо против него.

Предлагаемые изменения будут реализованы dYdX Trading Inc., если результаты опроса Snapshot удовлетворят следующим критериям:

* минимальный размер кворума — не менее 1 млн DYDX/stkDYDX. Минимальный размер кворума способствует децентрализации процесса принятия решений и защищает от одностороннего принятия решений.
* минимальная разница в количестве голосов — в пользу предложения должно быть отдано не менее 67% голосов. Минимальная разница в количестве голосов помогает отсеивать очень спорные предложения, требующие дальнейшего обсуждения.

На то, чтобы внести изменения, полученные в результате успешного опроса Snapshot, у dYdX Trading Inc. будет периода исполнения сроком до 1 эпохи (28 дней).

Обращаем внимание, что предложения и голоса — это просто подписанные сообщения, хранящиеся в IPFS и доступные на портале Commonwealth.

## 4. Создание ППУ (ончейн)

Если достигнут примерный консенсус, участник сообщества, обладающий соответствующим правом на внесение данного типа предложений, может внести ППУ в блокчейне. ППУ в блокчейне инициируется вызовом смарт-контракта. Предложение должно быть основано на победном результате офчейн-голосования по ППУ на Snapshot. Оно может состоять из одного или нескольких действий (до десяти).

Для создания ППУ требуется минимальное количество находящихся во владении/делегированных токенов на учетной записи. При создании предложения необходимо указать исполнителя с правом на блокировку по времени. Ниже приведены исходные параметры (управление может менять их):

| Параметр | Описание | Исполнитель с правом на короткую блокировку по времени | Исполнитель с правом на остановку дерева Меркла | Исполнитель с правом на длительную блокировку по времени | Исполнитель Starkware |
| ------------------ | ------------------------------------------------ | ----------------------- | ---------------------- | ---------------------- | -------------------- |
| Показатель, установленный для предложения | Минимальное количество находящихся во владении/делегированных токенов, необходимое для создания предложения | 0,5% от общего доступного количества | 0,5% от общего доступного количества | 2% от общего доступного количества | 0,5% от общего доступного количества |

## 5. Голосование по ППУ (ончейн)

После создания ППУ в цепочке предложение переходит в состояние `ожидания` на период, определяемый **задержкой голосования**, которая в настоящий момент составляет `6570` блоков или приблизительно 1 день (из расчета 13 секунд на блок). Другими словами, снимки пользователей фиксируются через 1 день после создания ППУ. В этот момент предложение переходит в `активное` состояние.

После задержки голосования активируется период голосования. Продолжительность периода голосования зависит от типа предложения.

Блок-схема состояний ППУ показана ниже:

![Жизненный цикл ППУ](../.gitbook/assets/1-proposal-state-flowchart.png)

После создания ППУ в блокчейне начинаются **задержка голосования** и **период голосования**, а для него должны быть достигнуты **минимальный кворум** и минимальная **разница в количестве голосов**. Ниже приведены исходные параметры:

| Параметр | Описание | Исполнитель с правом на короткую блокировку по времени | Исполнитель с правом на остановку дерева Меркла | Исполнитель с правом на длительную блокировку по времени | Исполнитель Starkware |
| ----------------- | ----------------------------------------------------------------------------------------------------- | ----------------------- | ---------------------- | ---------------------- | -------------------- |
| Задержка голосования | Количество блоков Ethereum, которое нужно создать до начала голосования по предложению после его внесения | 6570 блоков | 6570 блоков | 6570 блоков | 6570 блоков |
| Период голосования | Время, в течение которого можно голосовать по предложениям | 4 дня | 2 дня | 10 дней | 4 дня |
| Минимальный кворум | Минимальное количество голосов за ППУ для его принятия | 2% от общего доступного количества | 1% от общего доступного количества | 10% от общего доступного количества | 2% от общего доступного количества |
| Разница в количестве голосов | Разрыв в количестве голосов «за/против», требуемый для принятия ППУ | 0,5% от общего доступного количества | 0,5% от общего доступного количества | 10% от общего доступного количества | 0,5% от общего доступного количества |

Управление может менять только задержку голосования. Ее можно изменить только на значения между (включительно) минимальной и максимальной задержкой. Период голосования, минимальный размер кворума и разницу в количестве голосов менять нельзя.

## 6. Постановка в очередь и исполнение предложений

После принятия ППУ любой адрес может вызвать метод помещения в очередь, чтобы поставить предложение в очередь блокировки по времени. В очередь можно помещать только принятые ППУ.

| Параметр | Описание | Исполнитель с правом на короткую блокировку по времени | Исполнитель с правом на остановку дерева Меркла | Исполнитель с правом на длительную блокировку по времени | Исполнитель Starkware |
| ---------------------- | ------------------------------------------------------------------------------------- | ----------------------- | ---------------------- | ---------------------- | ------------------ |
| Задержка блокировки по времени | Задержка после принятия и размещения предложения в очереди и перед его выполнением | 2 дня | 0 дней | 7 дней | 2–9 дней |
| Период исполнения | Период, когда предложение становится выполнимым и в течение которого должно быть исполнено. | 7 дней | 7 дней | 7 дней | 7 дней |
| Минимальная задержка блокировки по времени | Минимальная задержка перед исполнением предложения (после его размещения в очереди) | 1 день | 0 дней | 5 дней | 4 дня |
| Максимальная задержка блокировки по времени | Максимальная задержка до исполнения предложения (после размещения в очереди) | 7 дней | 1 день | 21 день | 21 день |

Как только период голосования завершается и предложение принимается, любой желающий может вызвать функцию размещения в очереди, чтобы начать задержку блокировки по времени.

Для исполнителя Starkware с правом на приоритетную блокировку период приоритета составляет 7 дней из 9 дней задержки блокировки по времени. Это означает, что через 9 дней исполнить предложение может любой пользователь, но со 2 по 9 день (период приоритета) сделать это может только исполнитель Starkware.

На практике это выглядит следующим образом:

* Дни 0–2: исполнить предложение не может никто
* Дни 2–9: исполнить предложение может только Starkware
* День 9: исполнить предложение может любой пользователь

## 7. Отмена предложения (необязательно)

Автор предложения может отменить ППУ в любой момент его жизненного цикла. Предложение может отменить любой пользователь, прежде чем оно будет исполнено, если у лица, представившего предложение, недостаточно прав на внесение предложений в текущем блоке.

## Часто задаваемые вопросы

### Зачем нужна задержка голосования?

**Задержка голосования** — это количество блоков Ethereum, которое нужно создать после внесения предложения и до появления возможности проголосовать по нему.

Право голоса DYDX должно быть полностью передано на адрес либо до подачи предложения, либо во время **задержки голосования** по предложению.

На данный момент **задержка голосования** составляет `6570 блоков`, то есть примерно 1 день. Это значение добавляется к номеру текущего блока при создании предложения.

В будущем управление dYdX может проголосовать за увеличение или сокращение продолжительности **задержки голосования**. Увеличение **задержки голосования** имеет очевидные преимущества. Однако это может привести к некоторым потенциально негативным последствиям, таким как успешная эксплуатация пограничных случаев.

### Зачем нужно пороговое число токенов?

Поскольку токен DYDX — это свободно торгуемый актив, любой может попытаться захватить управление через его скупку на рынке. При этом для принудительного пропуска недобросовестного голоса потребуется минимум 5 и 20 миллионов DYDX в случае короткой и длительной блокировки по времени соответственно. Хотя возможность владения таким количеством токенов не исключается, оно слишком большое, и вполне вероятно, что атака принесет больший убыток нежели выгоду с учетом колебания цен.

Если какая-либо группа лиц добьется недобросовестного захвата, задержка блокировки по времени даст пострадавшим агентам время на вывод своих активов из протокола. Это также позволит создать форк протокола, который, скорее всего, выберут оставшиеся добросовестные участники.

###
