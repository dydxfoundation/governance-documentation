---
description: Высокоуровневый обзор архитектуры управления.
---

# Архитектура

## Обзор

Токен DYDX предоставляет его владельцам право предлагать изменения для протокола и голосовать за них. Управление DYDX основано на договорах управления AAVE и поддерживает голосование с учетом токенов DYDX, находящихся во владении.

Предложения должны получить определенное число и процент положительных голосов, что зависит от типа предложения.

Эти токены DYDX можно использовать для внесения предложений или голосования по предложениям управления, или передачи на другие адреса Ethereum.

В основе управления dYdx лежит шесть смарт-контрактов:

* **Контракт на `токен DYDX`**: содержит снимки права голоса каждого адреса в разных блоках по времени.
* **Контракт на `стратегию управления`**: содержит логическую схему оценки относительного права пользователей на внесение предложений и голосование.
* **Контракт на `модуль безопасности`**: содержит логическую схему стейкинга токенов DYDX, токенизации позиции и получения наград. Токен, размещенный в стейке модуля безопасности, сохраняет полные права управления.
* **Контракт `управляющего`**: отслеживает и может исполнять предложения с помощью смарт-контракта на блокировку по времени.
* **Контракт на `блокировку по времени`**: может помещать в очередь, отменять или выполнять операции, за которые проголосовало управление. Функции в предложении инициируются контрактом на блокировку по времени. Операции, находящиеся в очереди, могут исполняться с задержкой и до окончания периода исполнения.
* **Контракт на `приоритетную блокировку по времени`**: аналогичен контракту на блокировку по времени, но позволяет контролеру приоритета исполнять операции в течение **периода приоритета** (7 дней) до окончания задержки блокировки по времени.

![Smart contract architecture](<.. /.gitbook/assets/image (49).png>)

Ончейн-управление dYdX позволяет следующее:

* Голосовать по предложениям, которые должны быть исполнены любым авторизованным контрактом исполнителя
* Получать снимки находящихся во владении токенов в начале процесса внесения предложения
* Делегирование отдельных прав на внесение предложений и прав голоса
* Устанавливать пороговые значения управления, в том числе для предложений, кворумов и разницы в количестве голосов
* Менять способ подсчета голосов (путем замены адреса смарт-контракта на стратегию управления адресом контракта управляющего)

## Типы предложений

Существует четыре типа предложений с разными параметрами, которые влияют на их срок действия и исполнение. Так, критически важные предложения, влияющие на консенсус управления, требуют больше времени для голосования и большей разницы в количестве голосов, а предложения, влияющие только на параметры протокола, требуют меньше времени и могут быть исполнены быстро. Исполнитель должен подтвердить каждый тип предложения.

#### **Исполнитель с правом на короткую блокировку по времени**

Исполнитель с правом на короткую блокировку по времени контролирует следующее:

* Поощрительные контракты, включая модуль ликвидности, модуль безопасности и модуль дистрибьютора Меркла
* Средства в казне наград и сообщества
* Создание новых токенов
* Все контракты доверенности за исключением модуля безопасности
* Попечительство для контрактов доверенности Stark

**Исполнитель Starkware с правом на приоритетную блокировку по времени**

Исполнитель Starkware с правом на приоритетную блокировку по времени владеет контрактом StarkEx Perpetual Exchange. Он может выполнять предложения, управляющие конфигурацией биржи на базе протокола dYdX уровня 2.

При необходимости для правильного осуществления изменений на бирже может потребоваться участие специалистов Starkware. Поэтому данный исполнитель наделен полномочиями приоритетного контролера, предоставляющего специалистам Starkware период в 7 дней (**период приоритета**), в течение которого только они могут инициировать выполнение предложения.

Starkware не контролирует то, _какие_ изменения вносятся в протокол. Одобрять или отклонять изменения в протоколе биржи путем управления dYdX могут только владельцы DYDX.

#### **Исполнитель с правом на длительную блокировку по времени**

Исполнитель с правом на длительную блокировку по времени может исполнять предложения, изменяющие части протокола в целом и влияющие на консенсус управления.

#### **Исполнитель с правом на остановку дерева Меркла**

Исполнитель с правом на остановку дерева Меркла может исполнять предложения, которые замораживают корень дерева Меркла, периодически обновляемый с учетом совокупного баланса наград каждого пользователя. Это позволяет распределять новые награды между пользователями с течением времени в том случае, если предложенный корень неверный или содержит вредоносный код. Он также может запрещать принудительные запросы на торговлю для любого из контрактов доверенности Stark.

Для блокировки по времени заданы следующие исходные параметры:

![Initial timelock parameters](<.. /.gitbook/assets/Initial Timelock Parameters.png>)

